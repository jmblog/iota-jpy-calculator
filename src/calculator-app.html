<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-layout.html">

<dom-module id="calculator-app">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
        min-height: 100vh;
        --app-primary-color: #303030;
        --app-secondary-color: #5f6e80;
        --app-accent-color: #6391fe;
        --app-border-color: #e5e5e5;
        --paper-button-ink-color: var(--app-accent-color);
        --paper-icon-button-ink-color: var(--app-accent-color);
        --paper-spinner-color: var(--app-accent-color);
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        color: var(--app-primary-color);
      }

      app-toolbar {
        height: 98px;
        font-size: 24px;
        font-weight: 600;
        letter-spacing: 0.1em;
        border-bottom: 1px solid var(--app-border-color);
      }
    </style>
    <app-toolbar>
      <div main-title>IOTA/JPY Calculator</div>
    </app-toolbar>
  </template>

  <script>
    class CalculatorApp extends Polymer.Element {
      static get is() { return 'calculator-app'; }

      constructor() {
        super()
      }

      ready() {
        super.ready();
        // Custom elements polyfill safe way to indicate an element has been upgraded.
        this.removeAttribute('unresolved');
        this._ensureLazyLoaded()
      }

      _ensureLazyLoaded() {
        // load lazy resources after render and set `loadComplete` when done.
        if (!this.loadComplete) {
          Polymer.RenderStatus.afterNextRender(this, () => {
            Polymer.importHref(this.resolveUrl('lazy-resources.html'), () => {
              // Register service worker if supported.
              if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('service-worker.js', { scope: '/' });
              }
              this.loadComplete = true;
            });
          });
        }
      }

    }

    window.customElements.define(CalculatorApp.is, CalculatorApp);
  </script>

</dom-module>
